<html>
<body>

	<style type="text/css">
		table, tr, td{
			border : 1px solid black;
			text-align: left;
		}

	</style>

	<script type="text/javascript">

		function init(statusList, urlList, urlCount) {

            		var option = "width = 650, height = 350, top = 100, left = 200, location = no"
            		var pop1 = window.open("", "_blank", option);

			pop1.document.write("<table border='1' bordercolor='blue' align='center'>");

			pop1.document.write("<tr>");
			pop1.document.write("<td width='100' align='center'>상태</td>");
			pop1.document.write("<td width='500' align='center'>페이지 주소</td>");
			pop1.document.write("</tr>");

			for(i=0;i<urlCount;i++)
			{
				pop1.document.write("<tr>");
				if (statusList[i] == 200){
					pop1.document.write("<td align='center'><span style='color:green'>성공</span></td>");
				}
				else if (statusList[i] == 'rep'){
					pop1.document.write("<td align='center'><span style='color:orange'>중복</span></td>");
				}
				else{
					pop1.document.write("<td align='center'><span style='color:red'>실패</span></td>");
				}
				pop1.document.write("<td>&nbsp;&nbsp;"+urlList[i]+"</td>");
				pop1.document.write("</tr>");
			}
			pop1.document.write("</table>");
		}

		function button1_click(wordList) {

            		var option = "width = 600, height = 350, top = 100, left = 200, location = no"
            		var pop1 = window.open("", "_blank", option);

			pop1.document.write("<table border='1' bordercolor='blue' align='center'>");

			pop1.document.write("<tr>");
			pop1.document.write("<td width='50' align='center'>순위</td>");
			pop1.document.write("<td width='500' align='center'>자주 등장한 단어</td>");
			pop1.document.write("</tr>");

			for(i=0;i<10;i++)
			{
				pop1.document.write("<tr>");
				pop1.document.write("<td text-align:middle>&nbsp;&nbsp;"+(i+1)+"</td>");
				pop1.document.write("<td text-align:middle>&nbsp;&nbsp;"+wordList[i][0]+"</td>");
				pop1.document.write("</tr>");
			}
			pop1.document.write("</table>");
		}

		function button2_click(similList) {

            		var option = "width = 600, height = 350, top = 100, left = 200, location = no"
            		var pop1 = window.open("", "_blank", option);

			pop1.document.write("<table border='1' bordercolor='blue' align='center'>");

			pop1.document.write("<tr>");
			pop1.document.write("<td width='50' align='center'>순위</td>");
			pop1.document.write("<td width='500' align='center'>현재 url과 유사한 페이지</td>");
			pop1.document.write("</tr>");

			for(i=0;i<3;i++)
			{
				pop1.document.write("<tr>");
				pop1.document.write("<td text-align:middle>&nbsp;&nbsp;"+(i+1)+"</td>");
				pop1.document.write("<td text-align:middle>&nbsp;&nbsp;"+similList[i][0]+"</td>");
				pop1.document.write("</tr>");
			}
			pop1.document.write("</table>");
		}

		var urlList={{info['urlList']|tojson}};
		var urlCount=Number({{info['urlCount']|tojson}});
		var wordCount=({{info['wordCount']|tojson}});
		var analType=({{info['analType']|tojson}});
		var delayTime=({{info['delayTime']|tojson}});
		var statusList;
		var wordList;
		var similList;

		document.write("<table>");
		for(i=0;i<urlCount;i++)
		{
			document.write("<tr>");
			document.write("<td width='900' text-align: left>");
			document.write("&nbsp; URL"+ (i+1) +" : " + urlList[i]);
			document.write("</td>");

			document.write("<td width='200'>");
			document.write("&nbsp; 전체 단어수 : " + wordCount[i]);
			document.write("</td>");

			document.write("<td width='300'>");
			document.write("&nbsp; 처리시간 (초) : " + delayTime[i]);
			document.write("</td>");

			document.write("<td>");
			document.write("<form method='GET' action='/info/word/"+(i+1)+"'>");
			document.write("<input type='submit' value='단어분석 버튼'></form>");
			document.write("</td>");

			document.write("<td>");
			document.write("<form method='GET' action='/info/simil/"+(i+1)+"'>");
			document.write("<input type='submit' value='유사도분석 버튼'></form>");
			document.write("</td>");
			document.write("</tr>");
		}
		document.write("</table>");

		if (analType=='NULL'){
			statusList=({{info['statusList']|tojson}});
			init(statusList, urlList, urlCount);
		}
		else if (analType=='word'){
			wordList=({{info['wordList']|tojson}});
			button1_click(wordList);
		}
		else if (analType=='simil'){
			similList=({{info['similList']|tojson}});
			button2_click(similList);
		}
	</script>

</body>
</html>
